"use strict";(self["webpackChunkskywatcher"]=self["webpackChunkskywatcher"]||[]).push([[376],{7871:function(e,t,a){a.d(t,{Z:function(){return l}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"base-input"},[e.label?t("label",{attrs:{for:"search"}},[e._v(" "+e._s(e.label)+" ")]):e._e(),e.lazy?t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.inputValue,expression:"inputValue",modifiers:{lazy:!0}}],ref:"input",attrs:{type:e.type,name:e.name,placeholder:e.placeholder,disabled:e.disabled,max:e.max,min:e.min},domProps:{value:e.inputValue},on:{change:function(t){e.inputValue=t.target.value}}}):"checkbox"===e.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"input",attrs:{name:e.name,placeholder:e.placeholder,disabled:e.disabled,max:e.max,min:e.min,type:"checkbox"},domProps:{checked:Array.isArray(e.inputValue)?e._i(e.inputValue,null)>-1:e.inputValue},on:{change:function(t){var a=e.inputValue,i=t.target,n=!!i.checked;if(Array.isArray(a)){var s=null,r=e._i(a,s);i.checked?r<0&&(e.inputValue=a.concat([s])):r>-1&&(e.inputValue=a.slice(0,r).concat(a.slice(r+1)))}else e.inputValue=n}}}):"radio"===e.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"input",attrs:{name:e.name,placeholder:e.placeholder,disabled:e.disabled,max:e.max,min:e.min,type:"radio"},domProps:{checked:e._q(e.inputValue,null)},on:{change:function(t){e.inputValue=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"input",attrs:{name:e.name,placeholder:e.placeholder,disabled:e.disabled,max:e.max,min:e.min,type:e.type},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})])},n=[],s={name:"BaseInput",props:{type:{type:String,default:"text"},name:{type:String,required:!0},placeholder:{type:String,default:"type here"},model:{required:!0},label:{type:String,default:""},reset:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},max:{type:String,default:""},min:{type:String,default:""}},watch:{reset(e){e&&(this.$refs["input"].value="",this.$emit("inputValueChanged",""))},focus(e){e&&(this.$refs["input"].focus(),this.$emit("focused"))}},computed:{inputValue:{get(){return this.value},set(e){this.$emit("inputValueChanged",e)}}}},r=s,d=a(1001),o=(0,d.Z)(r,i,n,!1,null,"5f02c9e6",null),l=o.exports},8376:function(e,t,a){a.r(t),a.d(t,{default:function(){return X}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"apod-view"},[t("ErrorBoundary",{attrs:{componentName:"ApodContainer",errorMessage:"Unable to load astronomy picture of the day page"}},[t("ApodContainer")],1)],1)},n=[],s=a(7480),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"apod-container"},[t("DailyPicture",{attrs:{copyright:e.apod.copyright,date:e.apod.date,explanation:e.apod.explanation,hdurl:e.apod.hdurl,mediaType:e.apod.mediaType,title:e.apod.title,url:e.apod.url,reloadDailyPicture:e.reloadDailyPicture},on:{dailyPictureReloaded:function(t){e.reloadDailyPicture=!1}}}),t("ApodCalendar",{attrs:{apods:e.apods.list,date:e.date},on:{dayTapped:e.displayApod,dateChanged:e.searchApod}})],1)},d=[],o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"daily-picture"},[e.loaded?e._e():t("DailyPictureSkeleton"),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],staticClass:"daily-picture-container"},[e.error?t("div",{staticClass:"error-message"},[t("h1",[e._v("Astronomy Picture of the Day")]),t("h3",[e._v("Unable to load daily picture for "+e._s(e.dateText)+".")])]):[t("div",{staticClass:"image-container",on:{click:e.seeHdImage}},["image"===e.mediaType?t("img",{staticClass:"image",attrs:{src:e.url},on:{load:e.imageLoaded,error:e.displayError}}):t("LazyYoutube",{staticClass:"video",attrs:{src:e.url}}),t("transition",{attrs:{name:"slide-from-right",appear:""}},[e.copyright&&e.loaded?t("span",{staticClass:"copyright"},[e._v(" By "+e._s(e.copyright)+" ")]):e._e()])],1),t("div",{staticClass:"title-container"},[t("transition",{attrs:{name:"slide-from-above",appear:""}},[e.loaded?t("h1",[e._v("Astronomy Picture of the Day")]):e._e()]),t("transition",{attrs:{name:"flip-open",appear:""}},[e.loaded?t("span",{staticClass:"date"},[e._v(e._s(e.dateText))]):e._e()]),t("transition",{attrs:{name:"open-up",appear:""}},[e.loaded?t("div",{staticClass:"title"},[t("transition",{attrs:{name:"flip-open-later",appear:""}},[e.loaded?t("h2",[e._v(e._s(e.title))]):e._e()])],1):e._e()])],1),t("transition",{attrs:{name:"slide-up",appear:""}},[e.loaded?t("div",{staticClass:"container"},[t("FontAwesomeIcon",{staticClass:"icon",attrs:{icon:"fa-solid fa-info"}}),t("span",[e._v(e._s(e.explanation))]),t("BaseButton",{attrs:{onClickHandler:e.seeHdImage}},[e._v("See HD Image")])],1):e._e()])]],2)],1)},l=[],p=a(8612),u=a(5306);function c(e,t){(0,u.Z)(2,arguments);var a=(0,p.Z)(e),i=(0,p.Z)(t);return a.getTime()===i.getTime()}function y(e){(0,u.Z)(1,arguments);var t=(0,p.Z)(e);return t.setHours(0,0,0,0),t}var m=a(4105),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"daily-picture-skeleton"},[t("div",{staticClass:"image-placeholder"},[t("FontAwesomeIcon",{staticClass:"icon",attrs:{icon:"fa-solid fa-question",size:"6x"}})],1),t("h1",{staticClass:"loading-title"},[e._v("Loading")]),t("h3",[e._v("Astronomy Picture")]),t("BaseSpinner")],1)},f=[],v=a(7328),g={name:"DailyPictureSkeleton",components:{BaseSpinner:v.Z}},_=g,C=a(1001),Z=(0,C.Z)(_,h,f,!1,null,"0ab7669e",null),D=Z.exports,w=a(4828),x={name:"DailyPicture",components:{DailyPictureSkeleton:D,BaseButton:w.Z},props:{copyright:{type:String,required:!1},date:{type:Date,required:!0},explanation:{type:String,required:!0},hdurl:{type:String,required:!1},mediaType:{type:String,required:!0},title:{type:String,required:!0},url:{type:String,required:!0},reloadDailyPicture:{type:Boolean,required:!0}},watch:{mediaType(e){"video"===e&&this.imageLoaded()},reloadDailyPicture(e){e&&(this.loaded=!1)},date(){this.error=!1}},data(){return{loaded:!1,error:!1}},computed:{dateText(){return c(y(this.date),y(new Date))?"Today's Picture":this.date.getFullYear()===(new Date).getFullYear()?(0,m.Z)(this.date,"EEEE, do LLLL"):(0,m.Z)(this.date,"EEEE, do LLLL yyyy")}},methods:{seeHdImage(){"image"===this.mediaType&&window.open(this.hdurl,"_blank")},imageLoaded(){this.loaded=!0,this.$emit("dailyPictureReloaded")},displayError(){this.url&&(this.error=!0)}}},A=x,P=(0,C.Z)(A,o,l,!1,null,"26311923",null),k=P.exports,b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"apod-calendar"},[e.loaded?e._e():t("ApodCalendarSkeleton"),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],staticClass:"apod-calendar-container"},[t("h1",{staticClass:"title"},[e._v("Past APODs")]),t("BaseInput",{staticClass:"input",attrs:{type:"month",name:"date",model:e.date,max:e.max,min:e.min},on:{inputValueChanged:e.setDate}}),e.apods.length?t("div",{staticClass:"calendar"},[e._l(e.firstEmptyDays,(function(e){return t("div",{key:`first-${e}`,staticClass:"empty-day"})})),e._l(e.apods,(function(a){return t("div",{key:a.date.toString(),staticClass:"day",style:{backgroundImage:`url(${a.url})`},on:{click:function(t){return e.$emit("dayTapped",a)}}},[t("span",{staticClass:"date"},[e._v(" "+e._s(e.format(a.date,"d"))+" ")])])})),e._l(e.laterEmptyDays,(function(a){return t("div",{key:`later-${a}`,staticClass:"empty-day filled"},[t("span",{staticClass:"date"},[e._v(" "+e._s(a+e.apods.length)+" ")])])}))],2):e._e()],1)],1)},V=[];function S(e){(0,u.Z)(1,arguments);var t=(0,p.Z)(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}var M=function(){var e=this,t=e._self._c;return t("div",{staticClass:"apod-calendar-skeleton"},[t("h1",{staticClass:"title"},[e._v("Loading Past APODs")]),t("div",{staticClass:"input"}),t("div",{staticClass:"calendar"},[t("BaseSpinner")],1)])},B=[],T={name:"ApodCalendarSkeleton",components:{BaseSpinner:v.Z}},E=T,q=(0,C.Z)(E,M,B,!1,null,"45009736",null),L=q.exports,I=a(7871),$={name:"ApodCalendar",components:{ApodCalendarSkeleton:L,BaseInput:I.Z},props:{apods:{type:Array,required:!0},date:{type:String,required:!0}},data(){return{max:(0,m.Z)(new Date,"yyyy-MM"),min:(0,m.Z)(new Date(1995,6,16),"yyyy-MM"),loaded:!1}},computed:{firstEmptyDays(){return(0,m.Z)(this.apods[0]?.date,"i")-1},laterEmptyDays(){return(0,m.Z)(S(this.apods[this.apods.length-1]?.date),"d")-(0,m.Z)(this.apods[this.apods.length-1].date,"d")}},watch:{apods(e){let t=0;for(const a of e){if("video"===a.mediaType){t++;continue}const i=new Image;i.src=a.url,i.onload=()=>{t++,t===e.length&&(this.loaded=!0)},i.onerror=()=>{t++,t===e.length&&(this.loaded=!0)}}}},methods:{format:m.Z,endOfMonth:S,setDate(e){this.loaded=!1,this.$emit("dateChanged",`${e}-01`)}}},H=$,N=(0,C.Z)(H,b,V,!1,null,"7ed9579d",null),z=N.exports,F=a(8743);function Y(e){(0,u.Z)(1,arguments);var t=(0,p.Z)(e);return t.setDate(1),t.setHours(0,0,0,0),t}var O=a(3996),R=a(2528),U={name:"ApodContainer",title:"Astronomy Picture of the Day",components:{DailyPicture:k,ApodCalendar:z},data(){return{date:"",reloadDailyPicture:!1,apod:{copyright:"",date:new Date,explanation:"",hdurl:"",mediaType:"image",title:"",url:""},apods:{list:[],startDate:(0,m.Z)(Y(new Date),"yyyy-MM-dd"),endDate:(0,m.Z)(new Date,"yyyy-MM-dd")}}},watch:{async date(e){let t,a;((0,O.Z)((0,R.Z)(e),Y(this.apod.date))||(0,O.Z)(S(this.apod.date),(0,R.Z)(e)))&&(this.reloadDailyPicture=!0,t=(0,O.Z)(new Date,S((0,R.Z)(e)))?(0,m.Z)(new Date,"yyyy-MM-dd"):(0,m.Z)(S((0,R.Z)(e)),"yyyy-MM-dd"),a=(0,O.Z)(Y((0,R.Z)(e)),new Date(1995,6,16))?(0,m.Z)(new Date(1995,6,16),"yyyy-MM-dd"):(0,m.Z)(Y((0,R.Z)(e)),"yyyy-MM-dd"),this.apods.list=await(0,F.Z)(a,t));const i=this.apods.list.findIndex((t=>(0,m.Z)(t.date,"yyyy-MM-dd")===e));this.displayApod(this.apods.list[i<0?0:i])}},async created(){this.apods.list=await(0,F.Z)(this.apods.startDate,this.apods.endDate),this.apod=this.apods.list[this.apods.list.length-1]},methods:{displayApod(e){this.apod=e,window.scrollTo({top:0,behavior:"smooth"})},searchApod(e){this.date=e}}},j=U,G=(0,C.Z)(j,r,d,!1,null,"d3bc40ee",null),J=G.exports,K={name:"ApodView",title:"Astronomy Picture of the Day (APOD)",components:{ErrorBoundary:s.Z,ApodContainer:J}},Q=K,W=(0,C.Z)(Q,i,n,!1,null,"737f0c74",null),X=W.exports}}]);
//# sourceMappingURL=376.c0c7e979.js.map